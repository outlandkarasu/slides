# コラッツ予想<br>について<br>相談<br>させてください

小学生でもわかる数学の未解決問題

---

## 自己紹介

* からす
* 基本プログラマー
* 数学はほぼ素人……。
    * 10月に数学検定2級に挑戦します！
    * 高校数学2程度……。

**今日は、数学ガチ勢の皆さんにアドバイスをもらうために来ました！**

---

## コラッツ予想とは

コラッツ予想とは、任意の自然数(0を除く)について、

- 偶数なら、2で割る。
- 奇数なら、3倍して1を足す。

これを繰り返すと、

**必ずいつか1になる**

という予想です。

### 数式

`\[
f(n) = \left\{
\begin{array}{ll}
n / 2 & (n \bmod b \equiv 0) \\
3n + 1 & (n \bmod b \equiv 1) \\
\end{array}
\right.
\]`

### 例

- 5 → 16 → 8 → 4 → 2 → 1
- 11 → 34 → 17 → 52 → 26 → 13 → 40 → 20 → 10 → 5 → 16 → 8 → 4 → 2 → 1

### 長い例(27)

27→82→41→124→62→31→94→47→142→71→214→107→322→161→484→242→121→364→182→91→274→137→412→206→103→310→155→466→233→700→350→175→526→263→790→395→1186→593→1780→890→445→1336→668→334→167→502→251→754→377→1132→566→283→850→425→1276→638→319→958→479→1438→719→2158→1079→3238→1619→4858→2429→7288→3644→1822→911→2734→1367→4102→2051→6154→3077→9232→4616→2308→1154→577→1732→866→433→1300→650→325→976→488→244→122→61→184→92→46→23→70→35→106→53→160→80→40→20→10→5→16→8→4→2→1

---

## プログラマー的な見方

3n + 1 を分解する。

- 3n + 1 = (2n + n) + 1

ビットシフトと加算で表現できる。

```d
n = n << 1 + n + 1;
```

### ビットで見る

4の場合

-   101
-  1111 (3倍)
- 10000 (足す1)
-     1 (2で割る × 4回)

---

## 見える化

昔まとめました。

https://www.slideshare.net/AkiraYamaguchi6/ss-61066884

---

## 考察

- 3^n によりビット列は伸びる。
- +1により最下位ビットから連続するビットは消える。
- **このせめぎ合いでビットが消え、最終的に1だけになる。**

---

## 伸び方・減り方

3nで伸びる量は下記の通りで、約1.58

`\[
\log_2 3^n = n \log_2 3
\]`

一方、**+1で減る量は実験したところ約2。**

---

## 行き詰まり

- 3nで増えるビット数 < +1で減るビット数
- しかし、**なぜ+1で平均2減るのかが明らかでない。**
- もし、巨大な数でビットの密度が2を超える場合があったら、コラッツ予想は反証される。
- あるタイミングでだけビット密度が高い場合も、<br>巧妙に初期値を選ぶことで無限ループを発生させられるかもしれない。

---

## 逆から見る

---

## 木を生やす

---

## 式変形してみる

---

## ディオファントス方程式?

---

## 行き詰まり

---

## これから


